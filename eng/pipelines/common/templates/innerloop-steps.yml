parameters:
  buildConfig: ''
  archType: ''
  testLibrary: ''
  testRunner: ''
  condition: always()

steps:
  # Build and test leaf solution
  - ${{ if ne(parameters.testLibrary, '') }}:
    - script: dotnet test
              $(Build.SourcesDirectory)/src/libraries/${{ parameters.testLibrary }}/
              -c ${{ parameters.buildConfig }}
              /p:TargetArchitecture=${{ parameters.archType }}
              /p:TestRunner=${{ parameters.testRunner }}
              /bl:$(Build.SourcesDirectory)/artifacts/log/$(_BuildConfig)/innerloop-steps-test.binlog
      displayName: Build and test leaf solution
