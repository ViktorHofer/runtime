<Project>

  <Import Project="../Directory.Build.props" />

  <PropertyGroup>
    <TargetFramework>$(NetCoreAppCurrent)</TargetFramework>
    <EnableDefaultItems>false</EnableDefaultItems>
    <IsShipping>false</IsShipping>
    <AltJitArch>$(__AltJitArch)</AltJitArch>
  </PropertyGroup>

  <PropertyGroup>
    <CoreClrTestDir>$(MSBuildThisFileDirectory)</CoreClrTestDir>
    <TestSourceDir>$(CoreClrTestDir)src\</TestSourceDir>

    <TestRelativeBasePath Condition="'$(TestRelativeBasePath)' == ''">$(TestSourceDir)</TestRelativeBasePath>
    <BuildProjectRelativeDir>$([MSBuild]::MakeRelative($(TestRelativeBasePath), $(MSBuildProjectDirectory)))</BuildProjectRelativeDir>

    <TargetingPackPath Condition="'$(BaseTargetingPackPath)' == ''">$(ArtifactsBinDir)TargetingPack\</TargetingPackPath>
    <BinDir>$([MSBuild]::NormalizeDirectory('$(BaseRootOutputPath)', '$(OSPlatformConfig)'))</BinDir>
    <TestWorkingDir>$([MSBuild]::NormalizeDirectory('$(BaseRootOutputPath)', 'tests', '$(OSPlatformConfig)'))</TestWorkingDir>

    <!-- BaseIntermediateOutputPath is used by the SDK as the location
         for the lock file, and props/targets from nuget packages. -->
    <BaseIntermediateOutputPath>$([MSBuild]::NormalizeDirectory('$(TestWorkingDir)', '$(BuildProjectRelativeDir)', '$(MSBuildProjectName)'))</BaseIntermediateOutputPath>
    <IntermediateOutputPath>$(BaseIntermediateOutputPath)</IntermediateOutputPath>

    <BaseOutputPath>$([MSBuild]::NormalizeDirectory('$(BaseRootIntermediateOutputPath)', 'tests', '$(OSPlatformConfig)', '$(BuildProjectRelativeDir)', '$(MSBuildProjectName)'))</BaseOutputPath>
    <OutputPath>$(BaseOutputPath)</OutputPath>
  </PropertyGroup>

  <PropertyGroup Condition="'$(BuildAllProjects)' == 'true'">
    <!-- When we do a traversal build we get all packages up front, don't restore them again -->
    <RestorePackages>false</RestorePackages>
  </PropertyGroup>

  <!-- Which tests shall we build? Default: Priority 0 tests.
    At the command-line, the user can specify /p:CLRTestPriorityToBuild=666 (for example), and
    all tests with CLRTestPriority 666,..., 1 AND 0 will build.

    Consequently, specifying CLRTestPriorityToBuild=1 will build all tests with CLRTestPriority 1 and 0.

    CLRTestPriority = 0 will build only priority 0 cases.

    In other words, the CLRTestPriority cases of 0 are *essential* testcases. The higher the value,
    the less priority we give them.
   -->
  <PropertyGroup>
    <CLRTestPriorityToBuild>0</CLRTestPriorityToBuild>
  </PropertyGroup>

</Project>
